[gcode_macro PURGE_FILAMENT]
gcode:
    SAVE_GCODE_STATE NAME=PURGE_FILAMENT

    WIPE_NOZZLE STANDALONE=1 PURGE=20
    G91 E{printer['gcode_macro WIPE_NOZZLE']['standalone_retract'] - 1}

    RESTORE_GCODE_STATE NAME=PURGE_FILAMENT
